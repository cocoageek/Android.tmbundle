from __future__ import division
from jinja2.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, TemplateNotFound
def run(environment):
    name = '/installapp.html'

    def root(context, environment=environment):
        parent_template = None
        if 0: yield None
        parent_template = environment.get_template('base.html', '/installapp.html')
        for name, parent_block in parent_template.blocks.iteritems():
            context.blocks.setdefault(name, []).append(parent_block)
        for event in parent_template.root_render_func(context):
            yield event

    def block_content(context, environment=environment):
        if 0: yield None
        yield u'\n    <h3></h3>\n    <pre id="output"></pre>\n'

    def block_style(context, environment=environment):
        if 0: yield None
        yield u'\n\n'

    def block_script(context, environment=environment):
        if 0: yield None
        yield u'\n    cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n    cmd(\'cd onebit/\');\n    cmd(\'source bash/global.sh\');\n    cmd(\'checkBuildPath\');\n    var output = TextMate.system(command, null).outputString;\n    if (output) {\n        $(\'#content\').html(output);\n    } else {\n        command = "";\n\t\tcmd(\'cd "$TM_PROJECT_DIRECTORY/bin"\');\n\t\tcmd(\'apks=`ls | grep .apk`\');\n\t\tcmd(\'apk=$(CocoaDialog standard-dropdown --float --items $apks --string-output --text "Select a .apk file")\');\n        cmd(\'echo ${apk:2}"::::"${apk:0}\')\n        \n        var apk = (TextMate.system(command, null).outputString);\n        if (apk.indexOf("::::Ok")!=-1) {\n            i = apk.indexOf(\'::::\');\n            apk = apk.substring(0,i);\n            \n            if (apk!=\'\') {\n                command = "";\n                cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n                cmd(\'cd onebit/\');\n                cmd(\'python bash/listdevices.py\');\n\n                var device_str = (TextMate.system(command, null).outputString);\n\n                var device = \'\';\n\n                if (device_str!=\'\') {\n                    command = "";\n                    cmd(\'device=$(CocoaDialog standard-dropdown --float --items \'+device_str+\' --string-output --text "Select a device to install on")\');\n                    cmd(\'echo ${device:2}"::::"${device:0}\');\n                    device = (TextMate.system(command, null).outputString).replace("\\n", "").replace(" ","");\n                    \n                    \n                    \n                    if (device.indexOf("::::Ok")==-1) {\n                        device = "BAD";\n                    } else {\n                        i = device.indexOf(\'::::\');\n                        device = device.substring(0,i);\n                    }\n                } \n                if (device!="BAD") {\n                    command = "";\n                    cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n                    cmd(\'cd onebit/\');\n                    cmd(\'python bash/installapp.py "\'+apk+\'" "\'+device+\'"\');\n\n\n                    var result = TextMate.system(command, function(){\n                        $(\'h3\').html(\'Output\');    \n                        $(\'#output\').html(result.outputString); \n                        TextMate.isBusy = false;      \n                    });\n                    TextMate.isBusy = true;\n                    $(\'h3\').html(\'Installing...\');\n                } else {\n                    $(\'#output\').html(\'Installation Cancelled\');\n                }\n\n            };\n        } else {\n            $(\'#output\').html(\'Installation Cancelled\');\n        }\n    }\n'

    blocks = {'content': block_content, 'style': block_style, 'script': block_script}
    debug_info = '1=9&77=15&73=19&3=23'
    return locals()