from __future__ import division
from jinjalib.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, TemplateNotFound
def run(environment):
    name = '/buildapp.html'

    def root(context, environment=environment):
        parent_template = None
        if 0: yield None
        parent_template = environment.get_template('base.html', '/buildapp.html')
        for name, parent_block in parent_template.blocks.iteritems():
            context.blocks.setdefault(name, []).append(parent_block)
        for event in parent_template.root_render_func(context):
            yield event

    def block_content(context, environment=environment):
        if 0: yield None
        yield u'\n    <h3></h3>\n    <pre id="output"></pre>\n'

    def block_style(context, environment=environment):
        if 0: yield None
        yield u'\n\n'

    def block_script(context, environment=environment):
        if 0: yield None
        yield u'\n    cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n    cmd(\'cd onebit/\');\n    cmd(\'source bash/global.sh\');\n    cmd(\'checkBuildPath\');\n    var output = TextMate.system(command, null).outputString;\n    if (output) {\n        $(\'#content\').html(output);\n    } else {\n        command = "";\n        cmd(\'echo btype=$(CocoaDialog standard-dropdown --float --text "Select Build Type" --string-output --items debug release)\');\n        \n        var result = TextMate.system(command, null);\n        //var dobuild = result.outputString.replace(" ","").replace("\\n", "").replace("wipe=", "") == "1";\n\n        var debugtype = result.outputString.indexOf("debug")!=-1;\n        \n\n        if (result.outputString.indexOf("Ok")!=-1) {\n            command = "";\n            cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n            cmd(\'cd onebit/\');\n            if (debugtype) {\n                cmd(\'python bash/buildapp.py debug\');\n            } else {\n                cmd(\'python bash/buildapp.py release\');\n            }\n            var result = TextMate.system(command, function(){\n                $(\'h3\').html(\'Output\');    \n                $(\'#output\').html(result.outputString); \n                TextMate.isBusy = false;      \n            });\n            TextMate.isBusy = true;\n            $(\'h3\').html(\'Building...\');\n        };\n        \n                \n    }\n'

    blocks = {'content': block_content, 'style': block_style, 'script': block_script}
    debug_info = '1=9&47=15&43=19&3=23'
    return locals()