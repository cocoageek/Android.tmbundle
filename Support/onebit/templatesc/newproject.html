from __future__ import division
from jinjalib.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, TemplateNotFound
def run(environment):
    name = '/newproject.html'

    def root(context, environment=environment):
        parent_template = None
        if 0: yield None
        parent_template = environment.get_template('base.html', '/newproject.html')
        for name, parent_block in parent_template.blocks.iteritems():
            context.blocks.setdefault(name, []).append(parent_block)
        for event in parent_template.root_render_func(context):
            yield event

    def block_content(context, environment=environment):
        l_homedir = context.resolve('homedir')
        l_targets = context.resolve('targets')
        if 0: yield None
        yield u'\n<h3>Creates a new Android Project resource</h3>\n<span class="error"></span>\n<div id="new_proj">\n    \n\t<div id="new_form">\n\t<p><label for="location">Workspace</label><input type="button" name="location" value="Browse" id="location"></p>\n\t<p id="location_folder">%s</p>\n    <p><label for="project_name">Project Name</label><input type="text" name="project_name" value="" id="project_name"></p>\n\t<p>\n\t    <label for="build_target">Build Target</label>\n\t    <select id="build_target">\n\t        ' % (
            l_homedir, 
        )
        l_target = missing
        for l_target in l_targets:
            if 0: yield None
            yield u'\n\t            <option value="%s" class="min-%s">%s</option>\n\t        ' % (
                environment.getattr(l_target, 'id'), 
                environment.getattr(l_target, 'api'), 
                environment.getattr(l_target, 'label'), 
            )
        l_target = missing
        yield u'\n        </select>\n\t</p>\n\t<p><label for="package_name">Package Name</label><input type="text" name="package_name" value="com.example" id="package_name"></p>\n\t<p><label for="activity_name">Activity Name</label><input type="text" name="activity_name" value="" id="activity_name"></p>\n\t<p style="display:none;"><label for="min_sdk_version">Min SDK version</label><input type="text" name="min_sdk_version" value="%s" id="min_sdk_version"></p>\n\t<p><label for="create"></label><input type="button" name="create" value="Create" id="create">\n\t</p>\n\t</div>\n</div>\n\t<pre id="output"></pre>\n' % (
            environment.getattr(environment.getitem(l_targets, 0), 'api'), 
        )

    def block_style(context, environment=environment):
        if 0: yield None
        yield u'\n\t#new_form{\n\t\tfloat:left;\n\t\twidth:100%;\n\t\tmargin-top:10px;\n\t}\n\t#new_form p{\n\t\tfloat:left;\n\t\tclear:both;\n\t\tmargin:6px 0;\n\t\twidth:395px;\n\t}\n\t#new_form label{\n\t\tfloat:left;\n\t\twidth:130px;\n\t\tmargin-right:10px;\n\t\ttext-align:right;\n\t\tpadding-top:3px;\n\t}\n\t#new_form input:focus{\n\t\toutline-width:0;\n\t}\n\t#new_form input[type="text"]:focus{\n\t    background-position: 0 -100px;\n\t}\n\t#new_form input[type="text"]{\n\t    float:left;\n\t\twidth:240px;\n\t\tborder:none;\n\t\t-webkit-border-radius: 9px;\n        border-radius: 9px;\n\t\tpadding:6px;\n\t\t-webkit-box-shadow:1px 1px 2px #555;\n        box-shadow:1px 1px 2px #555;\n\t\tbackground: #FFF url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAACgCAMAAAD+fibNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMBQTFRF////zM6+0NLD1uW1z+Kr1OOy1NfJz9HB19nN1OOvzdC/0tTF0uKq1OCs2t3R7PPc1NbH6fHV0eSw2Oe31ui35efe8fTs3d7S2dvO0eGt5e7R/f773OrD1+W73+DW+vv2/f389PXy2+m/4eLY/v7+6uvk8PXl7u7p3d/U4uPa9/zy7/Li5+jg6Oni5e3M3uvH4+Xc1+i+2ea+9Pnv5fDW6+zl0eSs+/v54evE0+Kx4uvK4OzL7e3n4+/O4+vO0N+rI0WR/wAAAQNJREFUeNqk0MlyglAARNFmBgERlEGQSUQEUXGKRk38/78KeRiIlUUW3qpTvW/ghaLZDFEU4XQ6IQxDxHEMK7aQWRlu2Q3H4xFpmmK1WqEsS5imSVRVhTzPkSQJgiRAEARYLBawbZvo9/stx3EIURSf8Dz/x2AwaMgy5B80TdC/CLRQoxuC8NAjer0ORVH/eiWv/s/zPIReiKIosN/vYVkW5vM5lsslNE1r6Bp0XcfhcCDrum7tA+v1GtfPKy6XCzabDc7nMyaTCabfplPstltsdzv4vl8bYjQaEcxw2GGYZxzX4h7epY5kGA1JIow3paUoDZYdE6qqttgx22A7Y+X+JcAAZ/ceJOo8QMQAAAAASUVORK5CYII=) repeat-x 0 0;\n\t}\n\tselect{\n\t    float:left;\n\t\twidth:253px;\n    }\n\t#create{\n\t\tfloat:right;\n\t}\n\t#location_folder{\n\t    height:10px;\n\t    line-height:2px;\n\t    color:#FFF;\n\t    text-indent:142px;\n\t    white-space:nowrap;\n\t}\n'

    def block_script(context, environment=environment):
        l_homedir = context.resolve('homedir')
        if 0: yield None
        yield u'\n    $(\'.error\').hide();\n    var location = "%s";\n    $(\'#location\').click(function() {\n        command="";\n        cmd(\'location=$(CocoaDialog fileselect --float --text "Select a workplace (parent directory of this project)" --select-directories --with-directory "$HOME/Documents")\');\n        cmd(\'echo $location\');\n        var result = TextMate.system(command, null);\n        var hasdir = result.outputString.indexOf("/")!="-1";\n        if (hasdir) {\n            location = result.outputString;\n            $(\'#location_folder\').html(location);\n        } else {\n            location = "%s"\n            $(\'#location_folder\').html(location);\n        }\n    });\n    \n    $(\'#project_name, #activity_name, #package_name\').keyup(function(){\n        var slug = $(this).val().replace(/\\s+/g,\'\').replace(/[^\\.a-zA-Z0-9\\-]/g,\'\');\n        if (slug!=$(this).val()) {\n            $(this).val(slug);\n        };\n    });\n    \n    // $(\'#build_target\').change(function() {\n    //     var target=$(this).val();\n    //     var minapi = $(\'option[value=\'+target+\']\').attr(\'class\').replace("min-", "");\n    //     $(\'#min_sdk_version\').val(minapi);\n    // });\n    // \n    $(\'#create\').click(function() {\n        $(\'.error\').hide();\n        if ($(\'#project_name\').val().replace(" ","")=="" || $(\'#package_name\').val().replace(" ","")=="" || $(\'#activity_name\').val().replace(" ","")=="" || location.replace(" ","")=="") {\n            $(\'.error\').html(\'Error, please fill out all fields.\').show();\n        } else {\n            command = "";\n            cmd(\'cd "$TM_BUNDLE_SUPPORT"\');\n            cmd(\'cd onebit/\');\n            \n            cmd(\'python bash/createapp.py "\'+$(\'#project_name\').val()+";-;-;"+$(\'#build_target\').val()+";-;-;"+location+";-;-;"+$(\'#package_name\').val()+";-;-;"+$(\'#activity_name\').val()+\'"\');\n            TextMate.isBusy = true;\n            var result = TextMate.system(command, function(){\n                TextMate.isBusy = false;\n                $(\'#new_proj\').remove();\n                $(\'h3\').html("Output");\n                $(\'#output\').html(result.outputString);\n            });\n            \n        }\n    });\n' % (
            l_homedir, 
            l_homedir, 
        )

    blocks = {'content': block_content, 'style': block_style, 'script': block_script}
    debug_info = '1=9&108=15&115=20&120=23&121=26&122=31&127=32&56=35&3=39&5=43&16=44'
    return locals()